var App,Glue,Gui,LocalStorage,Person,ServerSideAdapter,UseCase,__hasProp={}.hasOwnProperty,__bind=function(a,b){return function(){return a.apply(b,arguments)}};_.defaults(this,{Before:function(a,b,c){return YouAreDaBomb(a,b).before(c)},BeforeAnyCallback:function(a,b,c){return YouAreDaBomb(a,b).beforeAnyCallback(c)},After:function(a,b,c){return YouAreDaBomb(a,b).after(c)},Around:function(a,b,c){return YouAreDaBomb(a,b).around(c)},AfterAll:function(a,b,c){var d,e,f,g;g=[];for(e=0,f=b.length;e<f;e++)d=b[e],g.push(After(a,d,c));return g},LogAll:function(a){var b,c,d;d=[];for(b in a){if(!__hasProp.call(a,b))continue;c=a[b],_.isFunction(c)?d.push(function(b){return Before(a,b,function(){return console.log("calling: "+b)})}(b)):d.push(void 0)}return d},AutoBind:function(a,b){var c,d,e;e=[];for(c in a)d=a[c],_.isFunction(d)?e.push(function(c){if(c.endsWith("Clicked")&&b[c.remove("Clicked")])return After(a,c,function(a){return b[c.remove("Clicked")](a)})}(c)):e.push(void 0);return e}}),LocalStorage=function(){function a(a){this.namespace=a,this.flush=__bind(this.flush,this),this.remove=__bind(this.remove,this),this.get=__bind(this.get,this),this.set=__bind(this.set,this)}return a.prototype.set=function(a,b){return console.log(b),$.jStorage.set(""+this.namespace+"/"+a,b)},a.prototype.get=function(a){return $.jStorage.get(""+this.namespace+"/"+a)},a.prototype.remove=function(a){return $.jStorage.deleteKey(""+this.namespace+"/"+a)},a.prototype.flush=function(){var a,b,c,d,e;d=$.jStorage.index(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.match("^"+this.namespace)?e.push($.jStorage.deleteKey(a)):e.push(void 0);return e},a}(),UseCase=function(){function a(){this.setPersonsList=__bind(this.setPersonsList,this),this.getPersonsList=__bind(this.getPersonsList,this),this.start=__bind(this.start,this),console.log("UseCase.constructor"),this.persons=[]}return a.prototype.start=function(){return console.log("UseCase.start"),this.getPersonsList()},a.prototype.getPersonsList=function(){return console.log("UseCase.getPersonsList")},a.prototype.setPersonsList=function(a){return console.log("UseCase.setPersonsList"),this.persons=a},a}(),Person=function(){function a(a,b){this.name=a,this.surname=b}return a}(),Gui=function(){function a(){this.showPersonsList=__bind(this.showPersonsList,this),this.createElementFor=__bind(this.createElementFor,this),console.log("Gui.constructor")}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return console.log("Gui.createElementFor"),e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a.prototype.showPersonsList=function(a){var b;return console.log("Gui.showPersonsList"),b=this.createElementFor("#persons-list-template",{list:a}),$(".main").append(b)},a}(),ServerSideAdapter=function(){function a(){this.buildPersonFromJson=__bind(this.buildPersonFromJson,this),this.jsonPersonsListNotLoaded=__bind(this.jsonPersonsListNotLoaded,this),this.personsListLoaded=__bind(this.personsListLoaded,this),this.jsonPersonsListLoaded=__bind(this.jsonPersonsListLoaded,this),this.loadPersonsList=__bind(this.loadPersonsList,this)}return a.prototype.loadPersonsList=function(){var a=this;return console.log("serverSideAdapter.loadPersonsList"),$.ajax({type:"GET",url:"http://simple-backend.shellyapp.com/people.json",success:function(b){return a.jsonPersonsListLoaded(b)},error:function(){return a.jsonPersonsListNotLoaded}})},a.prototype.jsonPersonsListLoaded=function(a){var b=this;return this.personsListLoaded(a.map(function(a){return b.buildPersonFromJson(a)})),console.log("persons list loaded")},a.prototype.personsListLoaded=function(a){},a.prototype.jsonPersonsListNotLoaded=function(){return console.log("persons list not loaded")},a.prototype.buildPersonFromJson=function(a){var b;return b=new Person(a.name,a.surname)},a}(),Glue=function(){function a(a,b,c){var d=this;this.useCase=a,this.gui=b,this.serverSideAdapter=c,After(this.useCase,"getPersonsList",function(){return d.serverSideAdapter.loadPersonsList()}),After(this.serverSideAdapter,"personsListLoaded",function(a){return d.useCase.setPersonsList(a)}),After(this.useCase,"setPersonsList",function(a){return d.gui.showPersonsList(a)}),LogAll(this.useCase),LogAll(this.gui),LogAll(this.serverSideAdapter)}return a}(),App=function(){function a(){var a,b,c,d;d=new UseCase,window.useCase=d,b=new Gui,c=new ServerSideAdapter,a=new Glue(d,b,c),d.start()}return a}(),new App